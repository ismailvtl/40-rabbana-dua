
<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>40 Rabbana Dua</title>
    <link rel="manifest" href="manifest.json">
    <meta name="description"
    content="40 Rabbana Du'as from the Quran">
    <meta name="keywords"
        content="40 rabbana dua, islamic dua, duas in quran, rabbana dua, 40 duas in quaran">
    <link rel="icon" href="rabbana.png" type="image/png" />
    <link rel="apple-touch-icon" href="rabbana.png">
    <meta name="theme-color" content="white" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="40 Rabbana Dua">
    <meta name="msapplication-TileImage" content="rabbana.png">
    <meta name="msapplication-TileColor" content="#01675F">
    <link rel="stylesheet" href="style.css?v=4">
    
 <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6C4EBSR56J"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6C4EBSR56J');
</script>
    
</head>
<body>
    <div class="dua-container">
        <header>
            <div class="title">
                <span>40 Rabbana Du'as </span><span class="small-text">from the Qur'an</span>
            </div>
            <div class="actions">
                <button class="dots"><svg width="4" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="2" fill="#444"></circle><circle cx="2" cy="8" r="2" fill="#444"></circle><circle cx="2" cy="14" r="2" fill="#444"></circle></svg></button>

                <div class="options">
                    <ul>
                        <li><button id="enableTranslation"><span>Translation: <span class="themeText">OFF</span></span></button></li>
                        <li><button id="enableTransliteration"><span>Transliteration: <span class="themeText">OFF</span></span></button></li>
                        <li style="border-top: 1px solid #ececec;"><a rel="noreferrer" class="whatsapp-cta" href="https://api.whatsapp.com/send?phone=971561316849" target="_blank"><span>Contact / Feedback</span></a></li>
                    </ul>
                </div>
            </div>
            <div class="scroll-progress">
                <span><span>
            </div>
        </header>
        <main>
            <div class="dua-list">
                
            </div>
        </main>
        <footer>
            <div class="audio-player">
                <audio id="audioEl" controls>
                    <source src="40-Rabbana.mp3" type="audio/mpeg">
                  </audio>
            </div>
        </footer>
        <section class="overlay" style="display: none;"></section>
    </div>

    <script>
    let duaContainer = document.querySelector('.dua-list');

    fetch(`data.json`)
    .then(function(response) {
        return response.json();
    })
    .then(function(json){
        for(const dua of json) {
        duaContainer.innerHTML += `<div class="dua-list-item">
            <div class="dua-list-item-quran-reference">${dua.refno}</div>
                    <div class="dua-list-item-arabic"><span>${dua.arabic}</span></div>
                    <div class="dua-list-item-transliteration">${dua.transliteration}</div>
                    <div class="dua-list-item-translation">${dua.translation}</div>
                </div>`;
            }
    });

    var audioEl = document.getElementById("audioEl");
    audioEl.playbackRate = 1.5;
    let overLay = document.querySelector('.overlay');

    document.querySelector('.dots').addEventListener('click', function(){
        document.querySelector('body').classList.add('options-opened');
        overLay.style.display = "block";
    });

    overLay.addEventListener('click', function(){   
        overLay.style.display = "none";
        document.querySelector('body').classList.remove('options-opened');
    });

    //enable translation
    document.querySelector('#enableTranslation').addEventListener('click', function(){
        toggleTranslation();
    });

    function checkTranslationLocalStorage(){
        if(localStorage.getItem("rabbanaDuaTranslation")!=null && localStorage.getItem("rabbanaDuaTranslation") === 'ON') {
            document.querySelector('#enableTranslation .themeText').textContent = "ON";
            document.querySelector('.dua-list').classList.add('translations-enabled');
        } else { 
            document.querySelector('#enableTranslation .themeText').textContent = "OFF";
            document.querySelector('.dua-list').classList.remove('translations-enabled');
        }
    }

    function checkTransliterationLocalStorage(){
        if(localStorage.getItem("rabbanaDuaTransliteration")!=null && localStorage.getItem("rabbanaDuaTransliteration") === 'ON') {
            document.querySelector('#enableTransliteration .themeText').textContent = "ON";
            document.querySelector('.dua-list').classList.add('transliteration-enabled');
        } else { 
            document.querySelector('#enableTransliteration .themeText').textContent = "OFF";
            document.querySelector('.dua-list').classList.remove('transliteration-enabled');
        }
    }

    function toggleTranslation(){
        if(localStorage.getItem("rabbanaDuaTranslation")!=null && localStorage.getItem("rabbanaDuaTranslation") === 'ON') {
            localStorage.setItem("rabbanaDuaTranslation", "OFF");
            document.querySelector('#enableTranslation .themeText').textContent = "OFF";
            document.querySelector('.dua-list').classList.remove('translations-enabled');
        } else { 
            localStorage.setItem("rabbanaDuaTranslation", "ON");
            document.querySelector('#enableTranslation .themeText').textContent = "ON";
            document.querySelector('.dua-list').classList.add('translations-enabled');
        }   
    }

    function toggleTransliteration(){
        if(localStorage.getItem("rabbanaDuaTransliteration")!=null && localStorage.getItem("rabbanaDuaTransliteration") === 'ON') {
            localStorage.setItem("rabbanaDuaTransliteration", "OFF");
            document.querySelector('#enableTransliteration .themeText').textContent = "OFF";
            document.querySelector('.dua-list').classList.remove('transliteration-enabled');
        } else { 
            localStorage.setItem("rabbanaDuaTransliteration", "ON");
            document.querySelector('#enableTransliteration .themeText').textContent = "ON";
            document.querySelector('.dua-list').classList.add('transliteration-enabled');
        }   
    }


    document.querySelector('#enableTransliteration').addEventListener('click', function(){
        toggleTransliteration();
    });

    checkTranslationLocalStorage();
    checkTransliterationLocalStorage();


 
 function scrollPercentage() {
  return (
    (document.querySelector('main').scrollTop + document.body.scrollTop) /
    (document.querySelector('main').scrollHeight -
    document.querySelector('main').clientHeight) *
    100
  );
}

document.querySelector('main').addEventListener("scroll", function() {
  let s = scrollPercentage();
  document.querySelector(".scroll-progress span").style.width = `${s}%`;
});
    </script>
</body>
</html>
